# 📚2. 📌(중요) 인쇄 상태 가져오기 (0x00 0x02 Get printing status)

"인쇄 상태 가져오기" API는 클라이언트가 프린터의 현재 작동 상태를 확인하고자 할 때 사용된다. 클라이언트가 이 명령을 프린터에 전송하면, 프린터는 요청에 대한 응답으로 현재 인쇄 작업에 대한 상세 정보를 JSON 형식으로 반환한다.

현재 회사 Github에 올라간 Yacode_TestClient 프로젝트에서는 해당 API를 사용하여, 리턴해주는 필드 중 print_yield 값을 받아 생산 카운트 값을 업데이트 했다.

하지만 아래의 문서를 참고하여, 로그 콜백이나 출력 콜백을 등록 한 후에, 콜백 데이터를 
가져다가 UI에 업데이트 하는 방식이 훨씬 더 좋은 방법으로 보인다.

[[📚9. 📌(중요) 로그,출력 콜백 등록 (0x00 0x09 Register log, output callback)]]
[[📚11. 📌(중요) 로그 콜백 수신 데이터 형식 (0x00 0x0C Log callback parameters)]] 


---

## ✅ 요청(Request)

- **헤더(Header)**: `0xEB 0x01`
    
- **프로토콜 마크**: `0x00 0x02`
    
- **데이터 길이**: 4바이트 (`\0` 포함)
    
- **데이터**: JSON 문자열 (UTF-8)
    

### 📄 JSON 구조 예시:

```
{
  "group_id": 0
}
```

> `group_id`: 프린트 헤드 그룹 ID (기본값 0)

---

## ✅ 응답(Response)

- **헤더(Header)**: `0xEB 0x01`
    
- **프로토콜 마크**: `0x00 0x02`
    
- **데이터 길이**: 4바이트 (`\0` 포함)
    
- **데이터**: JSON 문자열 (UTF-8)

### 📄 응답 JSON 예시:

```
{
  "group_id": 0,
  "print_status": 1,
  "reprint_status": 0,
  "meta_read_end": 0,
  "print_errno": 0,
  "print_yield": 12345,
  "line_speed": 1.5
}
```

### ✅ 주요 필드 설명

| 필드명            | 설명                                     |
| -------------- | -------------------------------------- |
| group_id       | 프린트 헤드 그룹 ID                           |
| print_status   | 인쇄 상태 (0: 인쇄 종료, 1: 인쇄 중)              |
| reprint_status | 재인쇄 상태 (0: 종료, 2: 재인쇄 중)               |
| meta_read_end  | 메타 읽기 종료 상태0: 정상 종료2: 카운터 최대 마크 도달로 종료 |
| print_errno    | 인쇄 오류 코드0: 없음8: DB 연결 실패9: DB 읽기 실패    |
| print_yield    | 출력 수량 (누적 또는 현재 인쇄 수량으로 생산 카운트를 의미)    |
| line_speed     | 라인 속도 (단위: m/s)                        |

> `meta_read_end`는 프린터가 인쇄할 데이터를 가져오는 과정(메타 읽기)이 어떤 방식으로 종료되었는지를 나타내는 상태 플래그이다.

---

## ✅ 요약

- 프린터의 인쇄 진행 상태, 출력 수량, 에러 여부 등 종합적인 인쇄 상태를 실시간으로 확인 가능
    
- 생산 라인 모니터링, 에러 추적, 재인쇄 상태 파악 등에 유용
    
- `group_id`를 기준으로 멀티 프린터/멀티 그룹 대응 가능
    

---